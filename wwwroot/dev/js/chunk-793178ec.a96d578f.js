(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-793178ec"],{"240b":function(e,t,a){"use strict";var n=a("32b87"),l=a.n(n);l.a},"25ea":function(e,t,a){"use strict";var n=a("82cb"),l=a.n(n);l.a},"32b87":function(e,t,a){},"5eb2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"header"},[a("el-button-group",[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-plus"},on:{click:e.onAddMember}},[e._v("Add")]),a("el-button",{attrs:{disabled:null==e.currentMember,size:"small",icon:"el-icon-remove"},on:{click:e.onRemoveMember}},[e._v("Remove")]),a("el-button",{attrs:{disabled:null==e.currentMember,size:"small",icon:"fas fa-edit"}},[e._v(" Rename")]),a("el-button",{attrs:{disabled:null==e.currentMember,size:"small",icon:"fas fa-link"}},[e._v(" Usages")])],1)],1),a("div",{staticClass:"content"},[a("ex-splitter",{attrs:{minSize:300,handlerColor:"#f1f1f1",size:300}},[a("div",{staticStyle:{height:"100%"},attrs:{slot:"panel1"},slot:"panel1"},[a("el-table",{ref:"memberTable",attrs:{data:e.tableData,height:"100%",stripe:!0,"highlight-current-row":"",border:""},on:{"current-change":e.currentRowChange}},[a("el-table-column",{attrs:{prop:"Name",label:"Name",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"Value",label:"Value",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"Comment",label:"Comment",align:"center"}})],1)],1),a("div",{staticClass:"ide-property-panel",attrs:{slot:"panel2"},slot:"panel2"},[a("el-collapse",{staticClass:"ide-property-collapse",attrs:{value:e.collapseValue}},[a("el-collapse-item",{attrs:{title:"Enum Properties",name:"1"}},[a("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"120px"}},[a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.target.ID,callback:function(t){e.$set(e.target,"ID",t)},expression:"target.ID"}})],1),a("el-form-item",{attrs:{label:"AppID"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.target.AppID,callback:function(t){e.$set(e.target,"AppID",t)},expression:"target.AppID"}})],1),a("el-form-item",{attrs:{label:"Model Name"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.target.Text,callback:function(t){e.$set(e.target,"Text",t)},expression:"target.Text"}})],1),a("el-form-item",{attrs:{label:"SortNo"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.target.SortNo,callback:function(t){e.$set(e.target,"SortNo",t)},expression:"target.SortNo"}})],1)],1)],1),e.currentMember?a("el-collapse-item",{attrs:{title:"Item Properties",name:"2"}},[a("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"120px"}},[a("el-form-item",{attrs:{label:"Name"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.currentMember.Name,callback:function(t){e.$set(e.currentMember,"Name",t)},expression:"currentMember.Name"}})],1),a("el-form-item",{attrs:{label:"Value"}},[a("el-input-number",{attrs:{min:0},on:{change:e.onItemValueChange},model:{value:e.currentMember.Value,callback:function(t){e.$set(e.currentMember,"Value",t)},expression:"currentMember.Value"}})],1),a("el-form-item",{attrs:{label:"Comment"}},[a("el-input",{on:{change:e.onItemCommentChange},model:{value:e.currentMember.Comment,callback:function(t){e.$set(e.currentMember,"Comment",t)},expression:"currentMember.Comment"}})],1)],1)],1):e._e()],1)],1)])],1)])},l=[],r=a("2b0e"),i=a("ff57"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"Add Enum Item",visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t},close:e.onClose}},[a("el-form",{ref:"viewModel",attrs:{model:e.viewModel,rules:e.rules,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{prop:"Name",required:!0,label:"Name"}},[a("el-input",{model:{value:e.viewModel.Name,callback:function(t){e.$set(e.viewModel,"Name",t)},expression:"viewModel.Name"}})],1),a("el-form-item",{attrs:{prop:"Value",required:!0,label:"Value"}},[a("el-input-number",{attrs:{min:0,disabled:!e.canEditValue},model:{value:e.viewModel.Value,callback:function(t){e.$set(e.viewModel,"Value",t)},expression:"viewModel.Value"}})],1),a("el-form-item",{attrs:{prop:"Comment",label:"Comment"}},[a("el-input",{model:{value:e.viewModel.Comment,callback:function(t){e.$set(e.viewModel,"Comment",t)},expression:"viewModel.Comment"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:e.caDisabled},on:{click:function(t){e.visible=!1}}},[e._v("Cancel")]),a("el-button",{attrs:{disabled:e.okDisabled,type:"primary"},on:{click:function(t){return e.submit("viewModel")}}},[e._v("Ok")])],1)],1)},o=[],c={data:function(){return{visible:!0,caDisabled:!1,okDisabled:!1,canEditValue:!0,viewModel:{Name:"",Value:0,Comment:""},rules:{Name:[{validator:this.validateName,trigger:"change"}]}}},methods:{onClose:function(e){this.$emit("close")},submit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.okDisabled=!0,t.caDisabled=!0;var a=i["a"].designers.getActiveDesigner(),n=t,l=[a.target.ID,n.viewModel.Name,n.viewModel.Value,n.viewModel.Comment];$runtime.channel.invoke("sys.DesignService.NewEnumItem",l).then((function(e){a.addMember(e),n.$message.success("Add enum item succeed"),n.visible=!1,n.caDisabled=!1})).catch((function(e){n.okDisabled=!1,n.caDisabled=!1,n.$message.error(e)}))}))},validateName:function(e,t,a){if(!t)return a(new Error("Name cannot be null"));a()}}},m=c,u=(a("25ea"),a("2877")),b=Object(u["a"])(m,s,o,!1,null,"391e6fae",null),d=b.exports,p={data:function(){return{designerType:"EnumDesigner",isMouseDown:!1,tableData:[],currentMember:null,collapseValue:["1"]}},props:{target:{type:Object,required:!0}},methods:{onAddMember:function(){var e=r["default"].component("NewEnumItemDialog",d);i["a"].ide.showDialog(e)},onRemoveMember:function(){var e=this.target.ID,t=this.currentMember.Name,a=this;this.$msgbox.confirm("Are you sure to delete member:"+t,"Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){$runtime.channel.invoke("sys.DesignService.DeleteEnumItem",[e,t]).then((function(e){e&&e.length?(i["a"].usages.update(e),a.$message.error("Member has references, can not delete")):(a.removeCurrentMember(),a.$message.success("Delete member succeed"))})).catch((function(e){a.$message.error(e)}))})).catch((function(){}))},currentRowChange:function(e,t){if(this.currentMember=e,this.collapseValue=["1","2"],!e)return this.collapseValue=["1"],!0},addMember:function(e){this.tableData.push(e),this.selectMember(this.tableData[this.tableData.length-1]),this.currentMember=e},selectMember:function(e){this.currentMember=e,this.$refs.memberTable.setCurrentRow(e)},removeCurrentMember:function(){if(!this.currentMember)return!1;var e=this.tableData.indexOf(this.currentMember);this.tableData.splice(e,1)},onItemValueChange:function(e){this.propertyChanged("Value",e)},onItemCommentChange:function(e){this.propertyChanged("LocalizedName",e)},propertyChanged:function(e,t){var a=this,n=this;$runtime.channel.invoke("sys.DesignService.ChangeEnumItem",[this.target.ID,this.currentMember.Name,e,t]).then((function(n){a.$emit("PropertyChanged",e,t)})).catch((function(e){n.$message.error(e)}))},save:function(){var e=this.target,t=this;$runtime.channel.invoke("sys.DesignService.SaveModel",[e.Type,e.ID]).then((function(e){t.$message.success("Save succeed")})).catch((function(e){t.$message.error("Save error: "+e)}))}},mounted:function(){var e=this;$runtime.channel.invoke("sys.DesignService.GetEnumItems",[this.target.ID]).then((function(t){e.tableData=t})).catch((function(e){alert(e)}))}},h=p,f=(a("240b"),Object(u["a"])(h,n,l,!1,null,"77e60928",null));t["default"]=f.exports},"82cb":function(e,t,a){}}]);