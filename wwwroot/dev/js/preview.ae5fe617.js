(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["preview"],{"65d9":function(e,t,n){"use strict";
/**
  * vue-class-component v6.3.2
  * (c) 2015-present Evan You
  * @license MIT
  */function o(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("2b0e")),i="undefined"!==typeof Reflect&&Reflect.defineMetadata;function c(e,t){a(e,t),Object.getOwnPropertyNames(t.prototype).forEach(function(n){a(e.prototype,t.prototype,n)}),Object.getOwnPropertyNames(t).forEach(function(n){a(e,t,n)})}function a(e,t,n){var o=n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t);o.forEach(function(o){var r=n?Reflect.getOwnMetadata(o,t,n):Reflect.getOwnMetadata(o,t);n?Reflect.defineMetadata(o,r,e,n):Reflect.defineMetadata(o,r,e)})}var d={__proto__:[]},u=d instanceof Array;function f(e){return function(t,n,o){var r="function"===typeof t?t:t.constructor;r.__decorators__||(r.__decorators__=[]),"number"!==typeof o&&(o=void 0),r.__decorators__.push(function(t){return e(t,n,o)})}}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.extend({mixins:e})}function p(e){var t=typeof e;return null==e||"object"!==t&&"function"!==t}function l(e,t){var n=t.prototype._init;t.prototype._init=function(){var t=this,n=Object.getOwnPropertyNames(e);if(e.$options.props)for(var o in e.$options.props)e.hasOwnProperty(o)||n.push(o);n.forEach(function(n){"_"!==n.charAt(0)&&Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})})};var o=new t;t.prototype._init=n;var r={};return Object.keys(o).forEach(function(e){void 0!==o[e]&&(r[e]=o[e])}),r}var y=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured"];function v(e,t){void 0===t&&(t={}),t.name=t.name||e._componentTag||e.name;var n=e.prototype;Object.getOwnPropertyNames(n).forEach(function(e){if("constructor"!==e)if(y.indexOf(e)>-1)t[e]=n[e];else{var o=Object.getOwnPropertyDescriptor(n,e);void 0!==o.value?"function"===typeof o.value?(t.methods||(t.methods={}))[e]=o.value:(t.mixins||(t.mixins=[])).push({data:function(){var t;return t={},t[e]=o.value,t}}):(o.get||o.set)&&((t.computed||(t.computed={}))[e]={get:o.get,set:o.set})}}),(t.mixins||(t.mixins=[])).push({data:function(){return l(this,e)}});var o=e.__decorators__;o&&(o.forEach(function(e){return e(t)}),delete e.__decorators__);var a=Object.getPrototypeOf(e.prototype),d=a instanceof r?a.constructor:r,u=d.extend(t);return w(u,e,d),i&&c(u,e),u}function w(e,t,n){Object.getOwnPropertyNames(t).forEach(function(o){if("prototype"!==o){var r=Object.getOwnPropertyDescriptor(e,o);if(!r||r.configurable){var i=Object.getOwnPropertyDescriptor(t,o);if(!u){if("cid"===o)return;var c=Object.getOwnPropertyDescriptor(n,o);if(!p(i.value)&&c&&c.value===i.value)return}0,Object.defineProperty(e,o,i)}}})}function h(e){return"function"===typeof e?v(e):function(t){return v(t,e)}}h.registerHooks=function(e){y.push.apply(y,e)},t.default=h,t.createDecorator=f,t.mixins=s},fd89:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"},style:{zoom:e.zoom}},[n("view-style",{ref:"viewStyle"}),null!==e.dynamicView?n(e.dynamicView,{tag:"component"}):e._e()],1)},r=[],i=(n("a481"),n("28a5"),n("7f7f"),n("2b0e")),c=n("65d9"),a=n.n(c);function d(e){return void 0===e&&(e={}),Object(c["createDecorator"])(function(t,n){(t.props||(t.props={}))[n]=e})}function u(e,t){void 0===t&&(t={});var n=t.deep,o=void 0!==n&&n,r=t.immediate,i=void 0!==r&&r;return Object(c["createDecorator"])(function(t,n){"object"!==typeof t.watch&&(t.watch=Object.create(null));var r=t.watch;"object"!==typeof r[e]||Array.isArray(r[e])?"undefined"===typeof r[e]&&(r[e]=[]):r[e]=[r[e]],r[e].push({handler:n,deep:o,immediate:i})})}var f={data:function(){return{styles:""}},render:function(e){return e("style",null,this.styles)}},s={components:{ViewStyle:f},data:function(){return{dynamicView:null,zoom:1}},created:function(){var e=window.$store;window.$designer.previewer=this,window.Vue=i["default"],window.Component=a.a,window.Prop=d,window.Watch=u,window.View=this.loadView,this.$router.beforeEach(function(t,n,o){if(console.log("路由:",n,t),"Preview"===n.name){var r=t.path.split("/");if(3===r.length){var i=e.tree.findNode(22,r[1]+"."+r[2]);return i&&(e.tree.selectNode(i),e.tree.onCurrentChanged(i)),void o(!1)}}o()})},mounted:function(){window.$designer.updatePreview()},destroyed:function(){window.$designer.previewer=null},methods:{update:function(e,t){if(t&&(this.$refs.viewStyle.styles=t),e)try{this.dynamicView=new Function(e)()||{}}catch(n){console.log("组件定义错误: "+n)}},changeZoom:function(e){this.zoom=e},loadView:function(e){var t=e.replace(".","");return i["default"].component(t,function(t,n){window.$runtime.channel.invoke("sys.DesignService.LoadView",[e]).then(function(o){var r=JSON.parse(o);r.Code||n("视图模型尚未编译");var i=null;r.Style&&(i={created:function(){this.$root.$children[0].$children[0].viewCreated(e,r.Style)},destroyed:function(){this.$root.$children[0].$children[0].viewDestroyed(e)}});try{var c=new Function(r.Code)()||{};r.Style&&(c.options.created?c.options.created=[i.created].concat(c.options.created):c.options.created=[i.created],c.options.destroyed?c.options.destroyed=[i.destroyed].concat(c.options.destroyed):c.options.destroyed=[i.destroyed]),t(c)}catch(a){n(a)}}).catch(function(e){n(e)})})}}},p=s,l=n("2877"),y=Object(l["a"])(p,o,r,!1,null,null,null);t["default"]=y.exports}}]);