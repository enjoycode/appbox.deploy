(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d58b982"],{4016:function(e,t,n){},c58b:function(e,t,n){"use strict";var r=n("f0cf"),i=n.n(r);i.a},d5bf:function(e,t,n){"use strict";var r=n("4016"),i=n.n(r);i.a},f0cf:function(e,t,n){},f1b0:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"header"},[n("el-radio-group",{staticStyle:{"margin-left":"40px"},attrs:{fill:"#0994ff",size:"small"},model:{value:e.activeView,callback:function(t){e.activeView=t},expression:"activeView"}},e._l(e.views,(function(t){return n("el-radio-button",{key:t.label,attrs:{label:t.label}},[e._v(e._s(t.title))])})),1),e._v(" "),n("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:"design"===e.activeView,expression:"activeView==='design'"}],on:{command:e.onTableCommand}},[n("el-button",{attrs:{size:"small",icon:"fas fa-table"}},[e._v(" Table"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"ICL"}},[e._v("Insert Column Left")]),n("el-dropdown-item",{attrs:{command:"ICR"}},[e._v("Insert Column Right")]),n("el-dropdown-item",{attrs:{command:"IRA",divided:""}},[e._v("Insert Row Above")]),n("el-dropdown-item",{attrs:{command:"IRB"}},[e._v("Insert Row Below")]),n("el-dropdown-item",{attrs:{command:"DC",divided:""}},[e._v("Delete Column")]),n("el-dropdown-item",{attrs:{command:"DR"}},[e._v("Delete Row")]),n("el-dropdown-item",{attrs:{command:"MC",divided:""}},[e._v("Merge Cells")]),n("el-dropdown-item",{attrs:{command:"SC"}},[e._v("Split Cells")])],1)],1),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"design"===e.activeView,expression:"activeView==='design'"}],attrs:{size:"small",icon:"fas fa-times fa-fw"},on:{click:e.onDeleteSelection}},[e._v("Delete")])],1),n("div",{staticClass:"content"},[n("design-view",{directives:[{name:"show",rawName:"v-show",value:"design"===e.activeView,expression:"activeView==='design'"}],ref:"designView",attrs:{background:"lightgray"},on:{ready:e.onDesignViewReady}}),"preview"===e.activeView?n("pdf-viewer",{attrs:{file:"/api/design/report/"+e.target.ID}}):e._e()],1)])},i=[],a=n("c34c"),o=(n("ac4d"),n("8a81"),n("ac6a"),n("d225")),s=n("b0b4"),l=n("2de8"),c=n("308d"),u=n("6bb5"),d=n("013f"),h=n("4e2b"),f=n("1273"),v=n("a374"),p=n("fe0c"),g=n("1fb1"),m=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.anchorSize=6,e.anchorLocation=g["a"].None,e}return Object(h["a"])(t,e),Object(s["a"])(t,[{key:"OnRender",value:function(e){e.strokeStyle="darkgray",e.lineWidth=2,e.strokeRect(-3,-3,this.Target.Bounds.Width+6,this.Target.Bounds.Height+6),this.DrawAnchor(e,this.BottomCenter)}},{key:"DrawAnchor",value:function(e,t){e.fillStyle="white",e.fillRect(t.X,t.Y,t.Width,t.Height),e.strokeStyle="black",e.lineWidth=1,e.strokeRect(t.X,t.Y,t.Width,t.Height)}},{key:"HitTest",value:function(e){var t="";return this.BottomCenter.Contains(e.X,e.Y)?(this.anchorLocation=g["a"].BottomCenter,t="s-resize"):this.anchorLocation=g["a"].None,this.anchorLocation!=g["a"].None?[!0,t]:[!1,t]}},{key:"OnMouseMove",value:function(e){this.Target.Resize(this.anchorLocation,e.DeltaX,e.DeltaY)}},{key:"OnMouseUp",value:function(e){this.Target.OnEndResize()}},{key:"BottomCenter",get:function(){return new v["a"]((this.Target.Bounds.Width-this.anchorSize)/2,this.Target.Bounds.Height,this.anchorSize,this.anchorSize)}}]),t}(p["a"]),y=n("b7c5"),b=n("8500"),w=function(e){function t(e,n,r){var i;Object(o["a"])(this,t),i=Object(c["a"])(this,Object(u["a"])(t).call(this,e)),i._bounds=new v["a"](0,0,0,0);var a=i.GetSize("Height",200);return i._bounds=new v["a"](0,r,n,a),i.LoadChildDesigners(),i}return Object(h["a"])(t,e),Object(s["a"])(t,[{key:"SetBounds",value:function(e,t,n,r,i){if(i===y["a"].Height){var a=r-this._bounds.Height;if(this.Parent){this._bounds.Height=r;for(var o=-1,s=0;s<this.Parent.Items.length;s++){var l=this.Parent.Items[s];-1===o&&l===this&&(o=s),-1!==o&&s>o&&(l.Bounds.Y+=a)}this.Parent.Bounds.Height+=a}this.Surface&&this.Surface.Invalidate()}else console.warn("ReportSectionDesigner只支持设置高度值")}},{key:"OnEndResize",value:function(){this.SetPropertyRSize("Height",this.Bounds.Height),this.Surface&&this.Surface.PropertyPanel.refreshProperty("Height")}},{key:"Paint",value:function(e,t){if(e.save(),e.beginPath(),t?e.rect(Math.max(t.X,this.Bounds.X),Math.max(t.Y+this.Bounds.Y,this.Bounds.Y),Math.min(t.Width,this.Bounds.Width-t.X),Math.min(t.Height,this.Bounds.Height-t.Y)):e.rect(this.Bounds.X,this.Bounds.Y,this.Bounds.Width,this.Bounds.Height),e.clip(),e.fillStyle="white",e.fillRect(this.Bounds.X,this.Bounds.Y,this.Bounds.Width,this.Bounds.Height),e.strokeStyle="rgb(173,219,241)",e.lineWidth=1,e.strokeRect(this.Bounds.X,this.Bounds.Y,this.Bounds.Width,this.Bounds.Height),this.Items){e.translate(this.Bounds.X,this.Bounds.Y);var n=!0,r=!1,i=void 0;try{for(var a,o=this.Items[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t&&!t.IntersectsWith(s.Bounds)||s.Paint(e)}}catch(l){r=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}e.translate(-this.Bounds.X,-this.Bounds.Y)}e.restore()}},{key:"getPropertyItems",value:function(){var e=this,t=[{name:"Common",items:[{title:"Height",readonly:!1,editor:"TextBox",getter:function(){return e.GetPropertyString("Height","0mm")},setter:function(t){return e.SetPropertyRSize("Height",t)}}]}];return t}},{key:"Bounds",get:function(){return this._bounds},set:function(e){this.SetBounds(e.X,e.Y,e.Width,e.Height,y["a"].All)}},{key:"IsContainer",get:function(){return!0}},{key:"Behavior",get:function(){return b["a"].CanResize}},{key:"SelectionAdorner",get:function(){return!this._selectionAdorner&&this.Surface&&(this._selectionAdorner=new m(this.Surface.Adorners,this)),this._selectionAdorner}}]),t}(f["a"]),S=n("d531"),_=n("c093"),k=function(){function e(t,n){Object(o["a"])(this,e),this._owner=t,this._node=n}return Object(s["a"])(e,[{key:"getPropertyOwnerType",value:function(){return"Field"}},{key:"getPropertyItems",value:function(){var e=this,t=[{name:"Common",items:[{title:"Name",readonly:!1,editor:"TextBox",getter:function(){return e.Name},setter:function(t){e.Name=t}},{title:"TypeName",readonly:!1,editor:"Select",options:D.TypeNames,getter:function(){return e.Type},setter:function(t){e.Type=t}}]}];return t}},{key:"DataSource",get:function(){return this._owner}},{key:"Node",get:function(){return this._node}},{key:"Name",get:function(){return this._node.Name},set:function(e){this._node.Name=e}},{key:"Type",get:function(){return this._node.Type},set:function(e){this._node.Type=e}}]),e}(),C=function(){function e(t,n){if(Object(o["a"])(this,e),this._fields=[],this._owner=t,this._node=n,this._node.Fields){var r=!0,i=!1,a=void 0;try{for(var s,l=this._node.Fields[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;this._fields.push(new k(this,c))}}catch(u){i=!0,a=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}}}return Object(s["a"])(e,[{key:"AddField",value:function(e,t,n){this._node.Fields||(this._node.Fields=[]);var r=new k(this,{Name:e,Type:n});this._node.Fields.push(r.Node),this._fields.push(r)}},{key:"RemoveField",value:function(e){this._node.Fields.splice(this._node.Fields.indexOf(e.Node),1),this._fields.splice(this._fields.indexOf(e),1),0===this._node.Fields.length&&delete this._node.Fields}},{key:"OnDropField",value:function(e,t,n){this._node.Fields.splice(this._node.Fields.indexOf(e.Node),1);var r=this._node.Fields.indexOf(t.Node);"after"===n&&(r+=1),this._node.Fields.splice(r,0,e.Node)}},{key:"getPropertyOwnerType",value:function(){return"DataSet"}},{key:"getPropertyItems",value:function(){var e=this,t=[{name:"Common",items:[{title:"Name",readonly:!1,editor:"TextBox",getter:function(){return e.Name},setter:function(t){e.Name=t}}]}];return t}},{key:"Node",get:function(){return this._node}},{key:"Fields",get:function(){return this._fields}},{key:"Name",get:function(){return this._node.Name},set:function(e){this._node.Name=e}}]),e}(),D=function(){function e(t){if(Object(o["a"])(this,e),this._items=[],this._owner=t,this._owner.Node.DataSources){var n=!0,r=!1,i=void 0;try{for(var a,s=this._owner.Node.DataSources[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;this._items.push(new C(this,l))}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}}return Object(s["a"])(e,[{key:"Add",value:function(t,n){this._owner.Node.DataSources||(this._owner.Node.DataSources=[]);var r=new C(this,{});if(t&&(r.Name=t),n){var i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;c.Type===_["b"].DataField&&r.AddField(c.Name,c.Name,e.ToTypeName(c.DataType))}}catch(u){a=!0,o=u}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}this._owner.Node.DataSources.push(r.Node),this._items.push(r)}},{key:"Remove",value:function(e){this._owner.Node.DataSources.splice(this._owner.Node.DataSources.indexOf(e.Node),1),this._items.splice(this._items.indexOf(e),1),0===this._items.length&&delete this._owner.Node.DataSources}},{key:"GetNames",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this._items[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.push(o.Name)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"Items",get:function(){return this._items}}],[{key:"ToTypeName",value:function(e){switch(e){case _["a"].String:return"String";case _["a"].Boolean:return"Boolean";case _["a"].DateTime:return"DateTime";case _["a"].Decimal:return"Decimal";case _["a"].Enum:case _["a"].Byte:case _["a"].Int16:case _["a"].Int32:case _["a"].Int64:case _["a"].UInt16:case _["a"].UInt32:case _["a"].UInt64:return"Integer";case _["a"].Float:case _["a"].Double:return"Float";default:return"String"}}}]),e}();D.TypeNames=["String","Boolean","DateTime","Decimal","Integer","Double"];var N=function(e){function t(e){var n;Object(o["a"])(this,t),n=Object(c["a"])(this,Object(u["a"])(t).call(this,e)),n._bounds=new v["a"](0,0,0,0),n._datasources=new D(Object(d["a"])(n));var r=0,i=n.GetSize("Width",400),a=n.GetChildByType("PageHeader");if(a){var s=new w(a,i,r);n.AddItem(s),r+=s.Bounds.Height}var l=n.GetChildByType("Details");if(l){var h=new w(l,i,r);n.AddItem(h),r+=h.Bounds.Height}var f=n.GetChildByType("PageFooter");if(f){var p=new w(f,i,r);n.AddItem(p),r+=p.Bounds.Height}return n._bounds=new v["a"](8,8,i,r),n}return Object(h["a"])(t,e),Object(s["a"])(t,[{key:"SetBounds",value:function(e,t,n,r,i){}},{key:"Paint",value:function(e,t){if(this.Items){var n=!0,r=!1,i=void 0;try{for(var a,o=this.Items[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.Paint(e)}}catch(l){r=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}},{key:"OnChangePageWidth",value:function(e){this._bounds.Width=S["a"].SizeToPixel(e);var t=!0,n=!1,r=void 0;try{for(var i,a=this.Items[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.Bounds.Width=this._bounds.Width}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.Surface.Invalidate()}},{key:"OnChangePageHeight",value:function(e){}},{key:"getPropertyItems",value:function(){var e=this,t=[{name:"Common",items:[{title:"DataSources",readonly:!0,editor:"ReportDataSources",getter:function(){return e},setter:function(e){}}]}];return t}},{key:"Bounds",get:function(){return this._bounds},set:function(e){}},{key:"IsContainer",get:function(){return!0}},{key:"DataSources",get:function(){return this._datasources}}]),t}(f["a"]),O=n("8cde"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-input",{attrs:{readonly:e.target.readonly},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})},x=[],B={props:{target:{type:Object}},data:function(){return{value:""}},watch:{target:function(e){this.value=e.getter()}},methods:{onChange:function(){this.target.readonly||this.target.setter(this.value)},refresh:function(){this.$set(this,"value",this.target.getter())}},mounted:function(){this.value=this.target.getter()}},P=B,R=n("2877"),T=Object(R["a"])(P,I,x,!1,null,null,null),$=T.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-checkbox",{attrs:{readonly:e.target.readonly},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})},j=[],A={props:{target:{type:Object}},data:function(){return{value:!1}},watch:{target:function(e){this.value=e.getter()}},methods:{onChange:function(){this.target.readonly||this.target.setter(this.value)},refresh:function(){this.$set(this,"value",this.target.getter())}},mounted:function(){this.value=this.target.getter()}},V=A,G=Object(R["a"])(V,F,j,!1,null,null,null),H=G.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{attrs:{readonly:e.target.readonly},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.target.options,(function(e){return n("el-option",{key:e,attrs:{value:e}})})),1)},L=[],M={props:{target:{type:Object}},data:function(){return{value:""}},watch:{target:function(e){this.value=e.getter()}},methods:{onChange:function(){this.target.readonly||this.target.setter(this.value)},refresh:function(){this.$set(this,"value",this.target.getter())}},mounted:function(){this.value=this.target.getter()}},z=M,W=Object(R["a"])(z,E,L,!1,null,null,null),Y=W.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-color-picker",{attrs:{readonly:e.target.readonly},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})},U=[],J={props:{target:{type:Object}},data:function(){return{value:"#000000"}},watch:{target:function(e){this.value=e.getter()}},methods:{onChange:function(){this.target.readonly||this.target.setter(this.value)},refresh:function(){this.$set(this,"value",this.target.getter())}},mounted:function(){this.value=this.target.getter()}},q=J,K=Object(R["a"])(q,X,U,!1,null,null,null),Q=K.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticStyle:{width:"100%"},on:{click:e.openEditor}},[e._v("...")]),n("el-dialog",{attrs:{"before-close":e.closingEditor,title:"Report Parameters",visible:e.dlgVisible,width:"600px"},on:{"update:visible":function(t){e.dlgVisible=t}}},[n("div",[n("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"New Parameter Name"},model:{value:e.newParameterName,callback:function(t){e.newParameterName=t},expression:"newParameterName"}}),n("el-button-group",[n("el-button",{on:{click:e.onAdd}},[e._v("Add")]),n("el-button",{on:{click:e.onDel}},[e._v("Remove")])],1),e._v(" "),n("br"),n("br"),n("el-row",{staticStyle:{height:"260px"}},[n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("el-table",{attrs:{data:e.parameters,"highlight-current-row":"",border:"",size:"mini","empty-text":" ",height:"100%"},on:{"current-change":e.onCurrentChange}},[n("el-table-column",{attrs:{prop:"Name",label:"Name"}}),n("el-table-column",{attrs:{prop:"DataType",label:"DataType"}})],1)],1),n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("property-panel",{ref:"props"})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dlgVisible=!1}}},[e._v("Done")])],1)])],1)},ee=[],te=n("eb37"),ne=n("19a2"),re={components:{PropertyPanel:te["a"]},props:{target:{type:Object}},data:function(){return{value:null,dlgVisible:!1,newParameterName:"",currentRow:null,parameters:[]}},watch:{target:function(e){this.value=e.getter()}},methods:{openEditor:function(){this.dlgVisible=!0,this.$set(this,"parameters",this.value.Parameters.Items)},closingEditor:function(e){e()},onAdd:function(){this.value.Parameters.Add(this.newParameterName),this.newParameterName=""},onDel:function(){this.currentRow?(this.value.Parameters.Remove(this.currentRow),this.currentRow=null,this.$refs.props.setPropertyOwner(null)):this.$message.warning("Please select a Parameter first")},onCurrentChange:function(e){this.currentRow=e,this.$refs.props.DesignService||(this.$refs.props.DesignService=this.value.Surface.DesignService),this.$refs.props.setPropertyOwner(e)}},mounted:function(){this.value=this.target.getter()}},ie=re,ae=Object(R["a"])(ie,Z,ee,!1,null,null,null),oe=ae.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticStyle:{width:"100%"},on:{click:e.openEditor}},[e._v("...")]),n("el-dialog",{attrs:{"before-close":e.closingEditor,title:"Report DataSources",visible:e.dlgVisible,width:"600px"},on:{"update:visible":function(t){e.dlgVisible=t}}},[n("div",[n("el-select",{attrs:{"value-key":"ID",filterable:"",placeholder:" "},model:{value:e.entityModel,callback:function(t){e.entityModel=t},expression:"entityModel"}},e._l(e.allEntities,(function(t){return n("el-option-group",{key:t.ID,attrs:{label:t.Text,value:t.ID}},e._l(t.Nodes,(function(e){return n("el-option",{key:e.ID,attrs:{label:e.Name,value:e}})})),1)})),1),n("el-button-group",[n("el-button",{on:{click:e.onAddDS}},[e._v("Add")]),n("el-button",{on:{click:e.onDelDS}},[e._v("Remove")])],1),e._v(" Fields: "),n("el-button-group",[n("el-button",{attrs:{icon:"fas fa-plus-circle"},on:{click:e.onAddField}}),n("el-button",{attrs:{icon:"fas fa-minus-circle"},on:{click:e.onDelField}})],1),n("br"),n("br"),n("el-row",{staticStyle:{height:"260px"}},[n("el-col",{staticStyle:{height:"100%",overflow:"auto"},attrs:{span:12}},[n("el-tree",{staticStyle:{height:"100%"},attrs:{data:e.datasources,props:e.treeOpts,draggable:"","allow-drag":e.allowDrag,"allow-drop":e.allowDrop,"highlight-current":"","default-expand-all":""},on:{"current-change":e.onCurrentChange,"node-drop":e.onNodeDrop}})],1),n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("property-panel",{ref:"props"})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dlgVisible=!1}}},[e._v("Done")])],1)])],1)},le=[],ce={components:{PropertyPanel:te["a"]},props:{target:{type:Object}},data:function(){return{value:null,dlgVisible:!1,allEntities:[],entityModel:null,currentNode:null,datasources:[],treeOpts:{label:"Name",children:"Fields"}}},watch:{target:function(e){this.value=e.getter()}},methods:{openEditor:function(){this.dlgVisible=!0,this.$set(this,"datasources",this.value.DataSources.Items)},closingEditor:function(e){e()},onAddDS:function(){var e=this,t=this;this.entityModel&&$runtime.channel.invoke("sys.DesignService.GetEntityModel",[this.entityModel.ID]).then((function(n){t.value.DataSources.Add(e.entityModel.Name,n.Members)})).catch((function(e){console.warn(e)}))},onDelDS:function(){this.currentNode&&1===this.currentNode.level?(this.value.DataSources.Remove(this.currentNode.data),this.currentNode=null,this.$refs.props.setPropertyOwner(null)):this.$message.warning("Please select a DataSource first")},onAddField:function(){var e=this;this.currentNode&&1===this.currentNode.level?this.$prompt("DataField Name","Input",{confirmButtonText:"Ok",cancelButtonText:"Cancel"}).then((function(t){var n=t.value;e.currentNode.data.AddField(n,n,"String")})).catch((function(){})):this.$message.warning("Please select a DataSource first")},onDelField:function(){this.currentNode&&2===this.currentNode.level?(this.currentNode.parent.data.RemoveField(this.currentNode.data),this.currentNode=null,this.$refs.props.setPropertyOwner(null)):this.$message.warning("Please select a Field first")},allowDrag:function(e){return 2===e.level},allowDrop:function(e,t,n){return"inner"!==n&&e.parent===t.parent},onNodeDrop:function(e,t,n){e.data.DataSource.OnDropField(e.data,t.data,n)},onCurrentChange:function(e,t){this.currentNode=t,this.$refs.props.DesignService||(this.$refs.props.DesignService=this.value.Surface.DesignService),this.$refs.props.setPropertyOwner(e)}},mounted:function(){this.value=this.target.getter(),ne["a"].tree.getAllEntityNodes(this.allEntities,null)}},ue=ce,de=Object(R["a"])(ue,se,le,!1,null,null,null),he=de.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticStyle:{width:"100%"},on:{click:function(t){e.dlgVisible=!0}}},[e._v("...")]),n("el-dialog",{attrs:{title:"Border Style",visible:e.dlgVisible,width:"400px"},on:{"update:visible":function(t){e.dlgVisible=t}}},[n("div",{staticClass:"rows"},e._l(e.borders,(function(t){return n("el-row",{key:t.pos,attrs:{gutter:8}},[n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v(e._s(t.pos)+":")]),n("el-col",{attrs:{span:8}},[n("el-select",{on:{change:function(n){return e.changeStyle("BorderStyle",t)}},model:{value:t.style,callback:function(n){e.$set(t,"style",n)},expression:"item.style"}},e._l(e.borderStyles,(function(e){return n("el-option",{key:e,attrs:{value:e}})})),1)],1),n("el-col",{attrs:{span:10}},[n("el-input-number",{attrs:{min:0,max:20},on:{change:function(n){return e.changeStyle("BorderWidth",t)}},model:{value:t.width,callback:function(n){e.$set(t,"width",n)},expression:"item.width"}})],1),n("el-col",{attrs:{span:2}},[n("el-color-picker",{on:{change:function(n){return e.changeStyle("BorderColor",t)}},model:{value:t.color,callback:function(n){e.$set(t,"color",n)},expression:"item.color"}})],1)],1)})),1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dlgVisible=!1}}},[e._v("Done")])],1)])],1)},ve=[],pe={props:{target:{type:Object}},data:function(){return{value:null,dlgVisible:!1,borderStyles:["None","Dotted","Dashed","Solid"],borders:[]}},watch:{target:function(e){this.refresh()}},methods:{refresh:function(){this.value=this.target.getter(),this.$set(this,"borders",this.value.BorderStyles)},changeStyle:function(e,t){this.value.SetBorderStyle(e,t)}},mounted:function(){this.refresh()}},ge=pe,me=(n("d5bf"),Object(R["a"])(ge,fe,ve,!1,null,"69be714a",null)),ye=me.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticStyle:{width:"100%"},on:{click:e.onAdd}},[e._v("...")]),n("input",{ref:"input",staticStyle:{width:"0px",visibility:"hidden"},attrs:{multiple:!1,accept:".png,.jpg,.webp",type:"file"},on:{change:e.onFileChange}})],1)},we=[],Se=(n("7f7f"),n("28a5"),{components:{PropertyPanel:te["a"]},props:{target:{type:Object}},data:function(){return{}},methods:{onAdd:function(){this.$refs.input.value=null,this.$refs.input.click()},onFileChange:function(e){var t=this,n=e.target||window.event.srcElement,r=n.files;if(FileReader&&r&&r.length){r[0].name.split(".").slice(0,-1).join(".");var i=new FileReader;i.onload=function(){t.target.setter(i.result)},i.readAsDataURL(r[0])}else this.$message.warning("Can't read image file.")}}}),_e=Se,ke=Object(R["a"])(_e,be,we,!1,null,null,null),Ce=ke.exports,De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticStyle:{width:"100%"},on:{click:e.openEditor}},[e._v("...")]),n("el-dialog",{attrs:{"before-close":e.closingEditor,title:e.title,visible:e.dlgVisible,width:"600px"},on:{"update:visible":function(t){e.dlgVisible=t}}},[n("div",[n("el-popover",{attrs:{placement:"bottom",width:"273"},model:{value:e.newVisible,callback:function(t){e.newVisible=t},expression:"newVisible"}},[n("el-form",{attrs:{size:"mini","label-width":"100px"}},[n("el-form-item",{attrs:{label:"GroupName:"}},[n("el-input",{model:{value:e.newGroupName,callback:function(t){e.newGroupName=t},expression:"newGroupName"}})],1),n("el-form-item",{attrs:{label:"GroupBy:"}},[n("el-select",{model:{value:e.newGroupBy,callback:function(t){e.newGroupBy=t},expression:"newGroupBy"}},e._l(e.fields,(function(e){return n("el-option",{key:e,attrs:{value:e}})})),1)],1),n("el-form-item",{attrs:{label:"Add Header:"}},[n("el-checkbox",{model:{value:e.addHeader,callback:function(t){e.addHeader=t},expression:"addHeader"}})],1),n("el-form-item",{attrs:{label:"Add Footer:"}},[n("el-checkbox",{model:{value:e.addFooter,callback:function(t){e.addFooter=t},expression:"addFooter"}})],1)],1),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){e.newVisible=!1}}},[e._v("Cancel")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.onAdd(!0)}}},[e._v("Ok")])],1),n("el-button",{attrs:{slot:"reference",type:"primary",disabled:!e.canAddParent},slot:"reference"},[e._v("Add Parent")])],1),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:!e.canDelete},on:{click:e.onDel}},[e._v("Delete")]),n("br"),n("br"),n("el-row",{staticStyle:{height:"260px"}},[n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("el-tree",{ref:"tree",staticStyle:{height:"100%"},attrs:{data:e.groups,props:e.treeOpts,"node-key":"Name","expand-on-click-node":!1,"highlight-current":"","default-expand-all":""},on:{"current-change":e.onCurrentChange}})],1),n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("property-panel",{ref:"props",attrs:{"show-title":!1,"label-width":"90px"}})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dlgVisible=!1}}},[e._v("Done")])],1)])],1)},Ne=[],Oe=n("7ab7"),Ie={components:{PropertyPanel:te["a"]},props:{target:{type:Object}},data:function(){return{value:null,dlgVisible:!1,newVisible:!1,newGroupName:"",newGroupBy:"",addHeader:!1,addFooter:!1,currentNode:null,groups:[],treeOpts:{label:"Name",children:"NoneStaticChildGroups"}}},computed:{title:function(){return this.target.options?"Table Row Groups":"Table Column Groups"},fields:function(){return this.currentNode?this.currentNode.data.GetFields():[]},canAddParent:function(){return this.currentNode},canAddChild:function(){return this.currentNode&&!this.currentNode.data.IsDetail()},canDelete:function(){return this.currentNode}},watch:{target:function(e){this.value=e.getter()}},methods:{openEditor:function(){this.dlgVisible=!0,this.target.options?this.$set(this,"groups",this.value.RowGroups.Items):this.$set(this,"groups",this.value.ColumnGroups.Items),this.trySelectFirst()},closingEditor:function(e){e()},trySelectFirst:function(){var e=this;this.$nextTick((function(){if(e.groups.length>0){var t=e.$refs.tree.getNode(e.groups[0]);e.$refs.tree.setCurrentKey(e.groups[0].Name),e.onCurrentChange(t.data,t)}else e.onCurrentChange(null,null)}))},onAdd:function(e){if(this.newVisible=!1,this.target.options&&e){var t=Oe["c"].GetRootGroup(this.currentNode.data),n=t.Table;n.TableLayout.InsertOuterRowGroup(this.currentNode.data,this.newGroupName,[{Expression:this.newGroupBy}],this.addHeader,this.addFooter),n.TableLayout.Owner.Invalidate()}},onDel:function(){if(this.currentNode){var e=Oe["c"].GetRootGroup(this.currentNode.data),t=e.Table,n=t.TableLayout.Owner.Bounds.Clone();this.target.options?t.TableLayout.DeleteRowGroup(this.currentNode.data,!0):t.TableLayout.DeleteColumnGroup(this.currentNode.data,!0),t.TableLayout.Owner.InvalidateOnBoundsChanged(n),this.trySelectFirst()}else this.$message.warning("Please select a TableGroup first")},onCurrentChange:function(e,t){this.currentNode=t,this.$refs.props.DesignService||(this.$refs.props.DesignService=this.value.Surface.DesignService),this.$refs.props.setPropertyOwner(e)}},mounted:function(){this.value=this.target.getter()}},xe=Ie,Be=Object(R["a"])(xe,De,Ne,!1,null,null,null),Pe=Be.exports,Re=n("d137"),Te=function(){function e(t,n,r){Object(o["a"])(this,e),this._surface=t,this._channel=n,this._modelId=r,this._surface.DesignService=this,this._surface.ToolboxService.Toolbox=new O["a"],this._surface.PropertyPanel.DesignService=this}return Object(s["a"])(e,[{key:"LoadDesigners",value:function(e){var t=new N(JSON.parse(e));this._rootDesigner=t,this._surface.AddItem(this._rootDesigner),this._surface.PropertyPanel.setPropertyOwner(this._rootDesigner),this._surface.Invalidate()}},{key:"ChangeProperty",value:function(e,t,n,r){console.log("ReportDesignService.ChangeProperty: "+t,r)}},{key:"DeleteSelection",value:function(){var e=this._surface.SelectionService.SelectedItems;if(e&&0!==e.length){var t=[],n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c instanceof l["a"]&&!c.IsTableCell&&(c.Parent?(t.push(c.Parent),n.push(c.Bounds),c.Parent.RemoveItem(c)):console.warn("待删除的元素无上级"))}}catch(h){i=!0,a=h}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}this._surface.SelectionService.ClearSelection();for(var u=0;u<t.length;u++){var d=t[u];d.Invalidate(n[u])}}}},{key:"InsertRowOrColumn",value:function(e,t){var n=this._surface.SelectionService.SelectedItems;if(0===n.length||!(n[0]instanceof l["a"])||!n[0].IsTableCell)return"Please select some TableCell first.";var r=n[0],i=r.Cell,a=i.TableLayout;a.SelectSingleCell(i.RowIndex,i.ColIndex,Re["c"].Replace),t?a.InsertRow(e?Re["b"].Before:Re["b"].After,Re["a"].Inside):a.InsertColumn(e?Re["b"].Before:Re["b"].After,Re["a"].Inside),r.Parent.Invalidate()}},{key:"DeleteRowOrColumn",value:function(e){var t=this._surface.SelectionService.SelectedItems;if(0===t.length||!(t[0]instanceof l["a"])||!t[0].IsTableCell)return"Please select some TableCell first.";var n=t[0],r=n.Cell,i=r.TableLayout;i.SelectSingleCell(r.RowIndex,r.ColIndex,Re["c"].Replace);var a=i.Owner.Bounds.Clone();e?i.DeleteRows(!0):i.DeleteColumns(!0),this._surface.SelectionService.SelectItem(i.Owner.Items[0]),i.Owner.InvalidateOnBoundsChanged(a)}},{key:"MergeSelectedCells",value:function(){var e=this._surface.SelectionService.SelectedItems;if(0===e.length||!(e[0]instanceof l["a"])||!e[0].IsTableCell)return"Please select some TableCell first.";var t=e[0],n=t.Cell.TableLayout;this.SetSelectedCells(e,n),n.MergeSelectedCells(),this._surface.SelectionService.SelectItem(n.Owner.Items[0]),n.Owner.Invalidate()}},{key:"SplitSelectedCells",value:function(){var e=this._surface.SelectionService.SelectedItems;if(0===e.length||!(e[0]instanceof l["a"])||!e[0].IsTableCell)return"Please select some TableCell first.";var t=e[0],n=t.Cell.TableLayout;this.SetSelectedCells(e,n),n.SplitSelectedCells(),this._surface.SelectionService.SelectItem(n.Owner.Items[0]),n.Owner.Invalidate()}},{key:"SetSelectedCells",value:function(e,t){var n=e[0],r=[];r.push(n.Cell);for(var i=1;i<e.length;i++){var a=e[i];a.Parent===n.Parent&&r.push(a.Cell)}t.SetSelectedCells(r)}},{key:"GetShapes",value:function(){return[]}},{key:"GetConnections",value:function(){return[]}},{key:"GetPropertyEditor",value:function(t){return e._editors[t]}},{key:"Surface",get:function(){return this._surface}},{key:"RootDesigner",get:function(){return this._rootDesigner}}]),e}();Te._editors={TextBox:$,CheckBox:H,Select:Y,Color:Q,ReportParameters:oe,ReportDataSources:he,Image:Ce,BorderStyle:ye,TableGroups:Pe};var $e={components:{DesignView:a["a"]},props:{target:{type:Object,required:!0}},data:function(){return{activeView:"design",views:[{label:"design",title:"Design"},{label:"preview",title:"Preview"}],designerType:"ReportDesigner",designService:null}},methods:{onDesignViewReady:function(){if(this.designService=new Te(this.$refs.designView.designSurface,$runtime.channel,this.target.ID),0!==this.target.ID){var e=this;$runtime.channel.invoke("sys.DesignService.OpenReportModel",[this.target.ID]).then((function(t){e.designService.LoadDesigners(t)})).catch((function(t){console.warn(t),e.$message.error("Open Report error:"+t)}))}else{var t='{"Width":"20cm","Items":[{"$T":"Details","Height":"8cm"}]}';this.designService.LoadDesigners(t)}},onTableCommand:function(e){var t=null;switch(e){case"ICL":t=this.designService.InsertRowOrColumn(!0,!1);break;case"ICR":t=this.designService.InsertRowOrColumn(!1,!1);break;case"IRA":t=this.designService.InsertRowOrColumn(!0,!0);break;case"IRB":t=this.designService.InsertRowOrColumn(!1,!0);break;case"DR":t=this.designService.DeleteRowOrColumn(!0);break;case"DC":t=this.designService.DeleteRowOrColumn(!1);break;case"MC":t=this.designService.MergeSelectedCells();break;case"SC":t=this.designService.SplitSelectedCells();break;default:break}t&&this.$message.error(t)},onDeleteSelection:function(){this.designService.DeleteSelection()},save:function(){console.log(JSON.stringify(this.designService.RootDesigner.Node,null,2))}}},Fe=$e,je=(n("c58b"),Object(R["a"])(Fe,r,i,!1,null,"48c508fe",null));t["default"]=je.exports}}]);